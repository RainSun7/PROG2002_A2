<!DOCTYPE html>
  <head>
      <title>Find fundraisers and nonprofits</title>
  </head>
  
  <body>
    <nav>
      <a href="Home.html">Home</a>  | 
      <a href="Search.html">Search</a> | 
      <a href="Fundraisers.html">Fundraisers</a>
    </nav>

    <header>
          <h1>Find fundraisers and nonprofits</h1>
    </header>

    <form id="searchForm">
        <h3>Select a category：</h3>
        <select id="categorySelect" required>
            <option value="">Category</option>
            <option value="1">Humanities</option>
            <option value="2">Nature</option>
            <option value="3">Scienc</option>
        </select>

        <h3>Active Status：</h3>
        <label><input type="checkbox" id="activeCheckbox" value="true"> Active</label><br>
        <label><input type="checkbox" id="activeCheckbox" value="true"> Inactive</label><br>

        <button type="button" onclick="search()">search</button>
        <button type="button" onclick="clearCheckboxes()">Clear</button>
    </form>

    <div id="data"></div>
  </body>

  <style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f9f9f9;
    }

    header {
        background-color: #31c8c8;
        color: white;
        padding: 10px;
        text-align: center;
        border-radius: 5px;
    }

    nav {
        background-color: #ffffff;
        padding: 5px;
        border-radius: 5px;
        text-align: right;
    }

    nav span, nav a {
        margin: 0 10px;
        text-decoration: none;
        color: #333;
    }

    nav a:hover {
        text-decoration: underline;
    }

    #data {
        display: flex;
        flex-wrap: wrap;
        gap: 20px; 
        margin-top: 10px;
    }

    .fundraiser-box {
        background: white;
        padding: 15px;
        width: calc(33.33% - 20px); 
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        box-sizing: border-box; 
    }
  </style>
</html>

<script>
    function searchByConditions(category, isActive) {
        const url = `http://localhost:3060/SearchCondition?CATEGORY=${category}&ACTIVE=${isActive}`;
        fetch(url)
            .then(response => response.json())
            .then(data => {
                const dataDiv = document.getElementById('data');
                dataDiv.innerHTML = "";

                if (data.length > 0) {
                    data.forEach(fundraiser => {
                        const boxDiv = document.createElement("div");
                        boxDiv.classList.add("fundraiser-box");
                        boxDiv.innerHTML = `
                            <p><strong>Fundraiser ID:</strong> ${fundraiser.FUNDRAISER_ID}</p>
                            <p><strong>Organizer:</strong> ${fundraiser.ORGANIZER}</p>
                            <p><strong>Caption:</strong> ${fundraiser.CAPTION}</p>
                            <p><strong>Target Funding:</strong> ${fundraiser.TARGET_FUNDING} </p>
                            <p><strong>Current Funding:</strong> ${fundraiser.CURRENT_FUNDING} </p>
                            <p><strong>City:</strong> ${fundraiser.CITY}</p>
                            <p><strong>Active:</strong> ${fundraiser.ACTIVE}</p>
                            <p><strong>Category ID:</strong> ${fundraiser.CATEGORY_ID}</p>
                        `;
                  
                        dataDiv.appendChild(boxDiv);
                        
                    });
                } else {
                    dataDiv.textContent = "No fundraiser data";
                }
            })
            .catch(error => {
                console.error("Error fetching data", error);
                document.getElementById('data').textContent = "Failed to load data";
            });
    }

    function search() {
        const category = document.getElementById('categorySelect').value;
        const isActive = document.getElementById('activeCheckbox').checked;

        if (!category) {
            alert("Please select at least one category!");
            return;
        }

        searchByConditions(category, isActive);
    }

    function clearCheckboxes() {
        document.getElementById('categorySelect').selectedIndex = 0; 
        document.getElementById('activeCheckbox').checked = false; 
        document.getElementById('data').innerHTML = ""; 
    }
</script>